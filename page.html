<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Food Log</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    .tab { display: none; }
    .tab.active { display: block; }
    .nav-button { margin-right: 10px; padding: 10px 20px; cursor: pointer; background: #f0f0f0; border: none; border-radius: 5px; }
    .input-group { margin-bottom: 10px; }
    .input-group input { padding: 5px; margin-left: 10px; }
    button { padding: 10px 20px; margin-top: 10px; cursor: pointer; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    table, th, td { border: 1px solid #ccc; }
    th, td { padding: 10px; text-align: left; }
    .totals { margin-top: 20px; font-weight: bold; }
  </style>
</head>
<body>
  <button class="nav-button" onclick="switchTab('log')">Food Log</button>
  <button class="nav-button" onclick="switchTab('goals')">Goals</button>

  <div id="log" class="tab active">
    <h2>Log Your Food</h2>
    <div class="input-group">
      <label>Food: <input type="text" id="foodName"></label>
    </div>
    <div class="input-group">
      <label>Calories: <input type="number" id="calories"></label>
    </div>
    <div class="input-group">
      <label>Protein (g): <input type="number" id="protein"></label>
    </div>
    <div class="input-group">
      <label>Quantity: <input type="number" id="quantity" value="1" min="1"></label>
    </div>
    <button onclick="logFood()">Log Food</button>
    <button onclick="resetLog()">Reset Log</button>

    <h3>Food Log</h3>
    <table>
      <thead>
        <tr>
          <th>Food</th>
          <th>Calories</th>
          <th>Protein (g)</th>
          <th>Quantity</th>
        </tr>
      </thead>
      <tbody id="foodLog"></tbody>
    </table>
    <div class="totals" id="totals"></div>
    <div class="totals" id="remaining"></div>
  </div>

  <div id="goals" class="tab">
    <h2>Set Your Goals</h2>
    <div class="input-group">
      <label>Calorie Goal: <input type="number" id="calorieGoal"></label>
    </div>
    <div class="input-group">
      <label>Protein Goal (g): <input type="number" id="proteinGoal"></label>
    </div>
    <button onclick="saveGoals()">Save Goals</button>
    <div class="totals" id="goalsSummary"></div>
  </div>

  <script>
    let foodLog = [];
    let calorieGoal = 0;
    let proteinGoal = 0;

    function switchTab(tabId) {
      document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
      document.getElementById(tabId).classList.add('active');
      if (tabId === 'goals') {
        document.getElementById('calorieGoal').value = calorieGoal || '';
        document.getElementById('proteinGoal').value = proteinGoal || '';
        updateGoalSummary();
      }
    }

    function logFood() {
      const name = document.getElementById('foodName').value;
      const calories = parseInt(document.getElementById('calories').value);
      const protein = parseInt(document.getElementById('protein').value);
      const quantity = parseInt(document.getElementById('quantity').value);

      if (name && !isNaN(calories) && !isNaN(protein) && !isNaN(quantity)) {
        foodLog.push({ name, calories, protein, quantity });
        renderLog();
        document.getElementById('foodName').value = '';
        document.getElementById('calories').value = '';
        document.getElementById('protein').value = '';
        document.getElementById('quantity').value = 1;
      } else {
        alert('Please fill in all fields.');
      }
    }

    function renderLog() {
      const tbody = document.getElementById('foodLog');
      tbody.innerHTML = '';
      let totalCalories = 0;
      let totalProtein = 0;

      foodLog.forEach(food => {
        const row = `<tr>
          <td>${food.name}</td>
          <td>${food.calories}</td>
          <td>${food.protein}</td>
          <td>${food.quantity}</td>
        </tr>`;
        tbody.insertAdjacentHTML('beforeend', row);
        totalCalories += food.calories * food.quantity;
        totalProtein += food.protein * food.quantity;
      });

      document.getElementById('totals').innerText =
        `Total Calories: ${totalCalories} | Total Protein: ${totalProtein}g`;

      const caloriesLeft = calorieGoal - totalCalories;
      const proteinLeft = proteinGoal - totalProtein;

      document.getElementById('remaining').innerText =
        `Remaining Calories: ${caloriesLeft >= 0 ? caloriesLeft : 0} | ` +
        `Remaining Protein: ${proteinLeft >= 0 ? proteinLeft : 0}g`;

      updateGoalSummary();
    }

    function resetLog() {
      foodLog = [];
      renderLog();
    }

    function saveGoals() {
      calorieGoal = parseInt(document.getElementById('calorieGoal').value) || 0;
      proteinGoal = parseInt(document.getElementById('proteinGoal').value) || 0;
      updateGoalSummary();
      renderLog();
    }

    function updateGoalSummary() {
      let totalCalories = 0;
      let totalProtein = 0;
      foodLog.forEach(food => {
        totalCalories += food.calories * food.quantity;
        totalProtein += food.protein * food.quantity;
      });
      const caloriesLeft = calorieGoal - totalCalories;
      const proteinLeft = proteinGoal - totalProtein;
      document.getElementById('goalsSummary').innerText =
        `Remaining Calories: ${caloriesLeft >= 0 ? caloriesLeft : 0} | ` +
        `Remaining Protein: ${proteinLeft >= 0 ? proteinLeft : 0}g`;
    }

    renderLog();
  </script>
</body>
</html>